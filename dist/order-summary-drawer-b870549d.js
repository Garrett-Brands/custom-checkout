"use strict";(self.webpackJsonpCheckout=self.webpackJsonpCheckout||[]).push([[720],{4822:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var a=n(31635),r=n(9188),l=n.n(r),i=n(30455),o=n(49655),c=n(39300),s=n(45050),u=n(91589),d=n(73545);function m(e){var t=e.physicalItems,n=e.digitalItems,a=e.giftCertificates,r=e.customItems;return t.length+n.length+a.length+(r||[]).length}var p=n(72769),h=n(63163);const f=(0,n(2156).A)((function(){return i.createElement("svg",{fill:"none",height:"37",viewBox:"0 0 38 37",width:"38",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M38 18.5C38 28.7173 29.7173 37 19.5 37C9.28273 37 1 28.7173 1 18.5C1 8.28273 9.28273 0 19.5 0C29.7173 0 38 8.28273 38 18.5Z",fill:"#F3F3F3"}),i.createElement("path",{clipRule:"evenodd",d:"M24.6671 24.6674L12.9998 13.0002L14.4141 11.5859L26.0813 23.2532L24.6671 24.6674Z",fill:"black",fillRule:"evenodd"}),i.createElement("path",{clipRule:"evenodd",d:"M25.6674 13.0004L14.0002 24.6676L12.5859 23.2534L24.2532 11.5862L25.6674 13.0004Z",fill:"black",fillRule:"evenodd"}))}));var g=n(6357),C=n(58330),v=n(59908);const y=(0,i.memo)((function(e){var t=e.items,n=e.shopperCurrencyCode,a=e.storeCurrencyCode,r=e.amountWithCurrency,l=(0,d.A)(t),c=n!==a,s=1===l?"cart.item":"cart.items";return i.createElement(i.Fragment,null,l," ",i.createElement(o.A,{id:s})," | ",r," ",c&&i.createElement("span",null,"(",n,")"))}));var E=n(62901),A=n(66317),S=n(62755),k=n(60164),b=n(97947),I=function(e){var t,n=e.onRequestClose,a=e.headerLink,r=e.subHeaderText;return(0,i.isValidElement)(a)&&(t=(0,i.cloneElement)(a,{className:"modal-header-link cart-modal-link test"})),i.createElement(i.Fragment,null,null!=t?t:a,i.createElement(C.A,{additionalClassName:"cart-modal-title"},i.createElement("div",null,i.createElement(o.A,{id:"cart.cart_heading"}),i.createElement("div",{className:"cart-heading-subheader"},r))),i.createElement("a",{className:"cart-modal-close",href:"#",onClick:(0,p.A)(n)},i.createElement("span",{className:"is-srOnly"},i.createElement(o.A,{id:"common.close_action"})),i.createElement(f,null)))};const N=function(e){var t=e.additionalLineItems,n=(e.children,e.isTaxIncluded),r=e.taxes,l=e.onRequestClose,s=e.onAfterOpen,u=e.storeCurrency,d=e.shopperCurrency,m=e.isOpen,f=e.headerLink,C=e.items,N=e.total,L=(0,a.__rest)(e,["additionalLineItems","children","isTaxIncluded","taxes","onRequestClose","onAfterOpen","storeCurrency","shopperCurrency","isOpen","headerLink","items","total"]),w=n&&r&&r.length>0,x=(0,i.useState)(null),O=x[0],_=x[1],z=(0,i.useState)(null),D=z[0],R=z[1],M=(0,i.useState)(null),F=M[0],P=M[1],W=(0,i.useState)(null),T=W[0],H=W[1],J=(0,i.useState)(null),q=J[0],K=J[1],Z=(0,i.useState)(null),G=Z[0],U=Z[1],B=(0,i.useState)(!1),j=B[0],V=B[1],Q=(0,i.useState)(!1),X=Q[0],Y=Q[1],$=(0,i.useState)(!1),ee=$[0],te=$[1];console.log(X);var ne=i.createElement(y,{amountWithCurrency:i.createElement(c.A,{amount:N}),items:C,shopperCurrencyCode:d.code,storeCurrencyCode:u.code}),ae=(0,v.A)()&&i.createElement(h.Ay,{className:"cart-modal-continue","data-test":"manage-instrument-cancel-button",onClick:(0,p.A)(l)},i.createElement(o.A,{id:"cart.return_to_checkout"}));var re=(0,i.useRef)(null);(0,i.useEffect)((function(){window.addEventListener("multiShipClick",(function(e){var t=e;console.log(t),Y(!X)})),window.addEventListener("addressClick",(function(e){var t=e.detail.address.postalCode;te(!ee),K(t),H(t)})),window.addEventListener("zipCodeInputEvent",(function(e){var t=e.detail.zipCodeInput;t&&t!==re.current&&(re.current=t,K(t),H(t))}))})),(0,i.useEffect)((function(){var e=localStorage.getItem("selectedShipDateObject"),t=localStorage.getItem("zipCode"),n=localStorage.getItem("checkoutZipCode"),a=localStorage.getItem("checkoutShippingMethod"),r=localStorage.getItem("isMultiShippingMode"),l=JSON.parse(localStorage.getItem("allScheduledShipMethods")||"null");if(e&&"null"!==e){var i=JSON.parse(e),o=function(e,t,n){if(e&&t&&Array.isArray(e[t])){var a=e[t].find((function(e){return e.shipDate===n}));if(a)return a.deliveryDate.formatted}return null}(l,G,i.isoDate);_(i.formatted),R(o)}if(t&&"null"!==t&&n&&"null"!==n&&void 0!==n){var c=localStorage.getItem("zipCode"),s=c?JSON.parse(c):null;P(s)}if(a&&"null"!==a){var u=localStorage.getItem("checkoutShippingMethod"),d=u?JSON.parse(u):null;U(function(e){for(var t=0,n=["Ground","Next Day Air","2nd Day Air"];t<n.length;t++){var a=n[t];if(e.includes(a))return a}return null}(d))}if(null!==r&&"null"!==r){var m=JSON.parse(r);"boolean"==typeof m.value&&V(m.value)}}));return i.createElement(g.A,{additionalBodyClassName:"cart-modal-body optimizedCheckout-orderSummary",additionalHeaderClassName:"cart-modal-header optimizedCheckout-orderSummary with-continue-button",additionalModalClassName:"optimizedCheckout-cart-modal",footer:ae,header:I({headerLink:f,subHeaderText:ne,onRequestClose:l}),isOpen:m,onAfterOpen:s,onRequestClose:l},i.createElement(S.A,null,i.createElement(E.A,{displayLineItemsCount:!1,items:C})),O&&i.createElement(S.A,null,i.createElement("div",{className:"shipping-preview-container-orderSummary"},i.createElement("div",{className:"shipping-preview-item","data-type":"ship-date"},i.createElement("span",null,"Ship Date"),i.createElement("span",null,O)),!1===j&&function(){if(F===T||F===q)return i.createElement("div",{className:"shipping-preview-item","data-type":"delivery-date"},i.createElement("span",null,"Estimated Delivery"),i.createElement("span",null,D))}())),i.createElement(S.A,null,i.createElement(k.A,(0,a.__assign)({isTaxIncluded:n,taxes:r},L)),t),i.createElement(S.A,null,i.createElement(b.A,{orderAmount:N,shopperCurrencyCode:d.code,storeCurrencyCode:u.code})),w&&i.createElement(S.A,null,i.createElement("h5",{className:"cart-taxItem cart-taxItem--subtotal optimizedCheckout-contentPrimary","data-test":"tax-text"},i.createElement(o.A,{id:"tax.inclusive_label"})),(r||[]).map((function(e,t){return i.createElement(A.A,{amount:e.amount,key:t,label:e.name,testId:"cart-taxes"})}))))};var L=n(9660);const w=(0,i.memo)((function(e){var t=e.additionalLineItems,n=e.coupons,r=e.discountAmount,p=e.giftCertificates,h=e.handlingAmount,f=e.headerLink,g=e.isTaxIncluded,C=e.lineItems,v=e.onRemovedCoupon,y=e.onRemovedGiftCertificate,E=e.shippingAmount,A=e.shopperCurrency,S=e.storeCreditAmount,k=e.giftWrappingAmount,b=e.storeCurrency,I=e.subtotalAmount,w=e.taxes,x=e.total,O=e.fees,_=(0,i.useMemo)((function(){return(0,L.A)(C)}),[C]),z=(0,i.useCallback)((function(e){return i.createElement(N,(0,a.__assign)({},e,{additionalLineItems:t,coupons:n,discountAmount:r,fees:O,giftCertificates:p,giftWrappingAmount:k,handlingAmount:h,headerLink:f,isTaxIncluded:g,items:_,onRemovedCoupon:v,onRemovedGiftCertificate:y,shippingAmount:E,shopperCurrency:A,storeCreditAmount:S,storeCurrency:b,subtotalAmount:I,taxes:w,total:x}))}),[t,n,r,p,h,f,g,_,v,y,k,E,A,S,b,I,w,x,O]);return i.createElement(u.A,{modal:z},(function(e){var t=e.onClick,n=e.onKeyPress;return i.createElement("div",{className:"cartDrawer optimizedCheckout-orderSummary",onClick:t,onKeyPress:n,tabIndex:0},i.createElement("figure",{className:l()("cartDrawer-figure",{"cartDrawer-figure--stack":m(_)>1})},i.createElement("div",{className:"cartDrawer-imageWrapper"},function(e){var t=e.physicalItems[0]||e.digitalItems[0];if(t&&t.imageUrl)return i.createElement("img",{alt:t.name,"data-test":"cart-item-image",src:t.imageUrl});if(e.giftCertificates.length)return i.createElement(s.A,null)}(_))),i.createElement("div",{className:"cartDrawer-body"},i.createElement("h3",{className:"cartDrawer-items optimizedCheckout-headingPrimary"},i.createElement(o.A,{data:{count:(0,d.A)(_)},id:"cart.item_count_text"})),i.createElement("a",null,i.createElement(o.A,{id:"cart.show_details_action"}))),i.createElement("div",{className:"cartDrawer-actions"},i.createElement("h3",{className:"cartDrawer-total optimizedCheckout-headingPrimary"},i.createElement(c.A,{amount:x}))))}))}))},91589:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(31635),r=n(30455);const l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isOpen:!1},t.canHandleEvent=!1,t.handleOpen=function(){t.canHandleEvent&&t.setState({isOpen:!0})},t.handleClose=function(){t.canHandleEvent&&t.setState({isOpen:!1})},t.handleKeyOpen=function(e){"Enter"===e.key&&t.handleOpen()},t}return(0,a.__extends)(t,e),t.prototype.componentDidMount=function(){this.canHandleEvent=!0},t.prototype.componentWillUnmount=function(){this.canHandleEvent=!1},t.prototype.render=function(){var e=this.props,t=e.children,n=e.modal,a=this.state.isOpen;return r.createElement(r.Fragment,null,t({onClick:this.handleOpen,onKeyPress:this.handleKeyOpen}),n({isOpen:a,onRequestClose:this.handleClose}))},t}(r.Component)},63163:(e,t,n)=>{n.d(t,{Ak:()=>a,Ay:()=>u,Mp:()=>r});var a,r,l=n(31635),i=n(9188),o=n.n(i),c=n(30455);function s(e){var t=e.className,n=e.isFullWidth,l=e.isLoading,i=e.size,c=e.variant;return o()("button",t,{"button--primary":c===a.Primary},{"button--tertiary":c===a.Secondary},{"button--action":c===a.Action},{"button--small":i===r.Small},{"button--tiny":i===r.Tiny},{"button--large":i===r.Large},{"button--slab":n},{"optimizedCheckout-buttonPrimary":c===a.Primary||c===a.Action},{"optimizedCheckout-buttonSecondary":c===a.Secondary},{"is-loading":l})}!function(e){e.Primary="primary",e.Secondary="secondary",e.Action="action"}(a||(a={})),function(e){e.Small="small",e.Tiny="tiny",e.Large="large"}(r||(r={}));const u=function(e){var t=e.children,n=e.className,a=e.disabled,r=e.isFullWidth,i=e.isLoading,o=e.size,u=e.testId,d=e.type,m=e.variant,p=(0,l.__rest)(e,["children","className","disabled","isFullWidth","isLoading","size","testId","type","variant"]);return c.createElement("button",(0,l.__assign)({},p,{className:s({className:n,isFullWidth:r,isLoading:i,size:o,variant:m}),"data-test":u,disabled:a||i,type:d||"button"}),t)}}}]);
//# sourceMappingURL=order-summary-drawer-b870549d.js.map